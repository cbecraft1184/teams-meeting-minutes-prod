# DOD Teams Meeting Minutes Management System
# Environment Variables Configuration
# 
# Copy this file to .env for local development (DO NOT commit .env to git)
# In Replit, configure these as Secrets via Tools > Secrets
#
# For production deployment, use AWS Secrets Manager or equivalent

# ============================================================================
# MICROSOFT GRAPH API - DEVELOPMENT (Commercial Microsoft 365)
# ============================================================================
# Azure AD App Registration credentials for development/testing
# Obtain from: Azure Portal > App Registrations > Your App

# Tenant ID (Directory ID) from Azure AD
GRAPH_TENANT_ID_DEV=

# Application (Client) ID from App Registration
GRAPH_CLIENT_ID_DEV=

# Client Secret (generate in Certificates & Secrets)
GRAPH_CLIENT_SECRET_DEV=

# (Optional) Separate secret for application-level permissions
GRAPH_APP_SECRET_DEV=

# ============================================================================
# MICROSOFT GRAPH API - PRODUCTION (DOD Gov Cloud)
# ============================================================================
# Azure AD App Registration for DOD production environment
# Obtain from: Azure Government Portal (portal.azure.us) > App Registrations

GRAPH_TENANT_ID_PROD=
GRAPH_CLIENT_ID_PROD=
GRAPH_CLIENT_SECRET_PROD=
GRAPH_APP_SECRET_PROD=

# ============================================================================
# AZURE OPENAI SERVICE - DEVELOPMENT (Commercial)
# ============================================================================
# Azure OpenAI resource for AI-powered meeting minutes generation
# Obtain from: Azure Portal > Azure OpenAI Service > Keys and Endpoint

# Azure OpenAI endpoint URL (e.g., https://your-resource.openai.azure.com/)
AZURE_OPENAI_ENDPOINT_DEV=

# API Key from Azure OpenAI resource
AZURE_OPENAI_API_KEY_DEV=

# Model deployment name (e.g., gpt-4, gpt-4-32k)
AZURE_OPENAI_DEPLOYMENT_DEV=gpt-4

# API version (typically latest stable)
AZURE_OPENAI_API_VERSION_DEV=2024-02-15-preview

# ============================================================================
# AZURE OPENAI SERVICE - PRODUCTION (Gov Cloud)
# ============================================================================
# Azure OpenAI Gov Cloud resource for DOD production
# Obtain from: Azure Government Portal > Azure OpenAI Service

AZURE_OPENAI_ENDPOINT_PROD=
AZURE_OPENAI_API_KEY_PROD=
AZURE_OPENAI_DEPLOYMENT_PROD=gpt-4
AZURE_OPENAI_API_VERSION_PROD=2024-02-15-preview

# ============================================================================
# SHAREPOINT INTEGRATION
# ============================================================================
# SharePoint site for meeting minutes archival
# These may be auto-configured by Replit SharePoint connector

# SharePoint tenant ID (same as GRAPH_TENANT_ID usually)
SHAREPOINT_TENANT_ID=

# SharePoint site URL (e.g., https://yourorg.sharepoint.com/sites/meetings)
SHAREPOINT_SITE_URL=

# Document library name for archival (e.g., "Meeting Minutes")
SHAREPOINT_LIBRARY=Meeting Minutes

# (Optional) SharePoint client credentials if not using connector
SHAREPOINT_CLIENT_ID=
SHAREPOINT_CLIENT_SECRET=

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# PostgreSQL database connection (auto-configured in Replit)
# For external deployments, configure manually

# Full PostgreSQL connection string
# DATABASE_URL=postgresql://user:password@host:port/database

# Individual database connection parameters
# PGHOST=localhost
# PGPORT=5432
# PGUSER=postgres
# PGPASSWORD=
# PGDATABASE=dod_meeting_minutes

# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================

# Node environment (development, production)
NODE_ENV=development

# Session secret for user authentication (generate random string)
# Use: openssl rand -base64 32
SESSION_SECRET=

# Application port (default: 5000 for Replit)
PORT=5000

# Base URL for the application (used for OAuth redirects)
# Development: https://your-workspace.replit.app
# Production: https://your-domain.com
BASE_URL=

# ============================================================================
# TEAMS APP CONFIGURATION
# ============================================================================

# Teams App ID (after app registration in Teams Developer Portal)
TEAMS_APP_ID=

# Teams App Package ID (after publishing to Teams Admin Center)
TEAMS_APP_PACKAGE_ID=

# ============================================================================
# FEATURE FLAGS
# ============================================================================
# Enable/disable features for testing and gradual rollout

# Enable Microsoft Graph webhook integration (true/false)
ENABLE_GRAPH_WEBHOOKS=false

# Enable Azure OpenAI processing (true/false)
ENABLE_AZURE_OPENAI=false

# Enable SharePoint archival (true/false)
ENABLE_SHAREPOINT_ARCHIVAL=false

# Enable email distribution via Graph API (true/false)
ENABLE_EMAIL_DISTRIBUTION=false

# Enable Azure AD group synchronization (true/false)
ENABLE_AZURE_AD_SYNC=false

# Enable audit logging (true/false)
ENABLE_AUDIT_LOGGING=true

# Enable ROI tracking (true/false)
ENABLE_ROI_TRACKING=true

# ============================================================================
# LOGGING AND MONITORING
# ============================================================================

# Log level (error, warn, info, debug, trace)
LOG_LEVEL=info

# Enable structured JSON logging (true/false)
LOG_JSON=false

# Application Insights instrumentation key (optional)
APPINSIGHTS_INSTRUMENTATIONKEY=

# ============================================================================
# WEBHOOK CONFIGURATION
# ============================================================================

# Webhook validation token (for Microsoft Graph subscriptions)
# Generate random string: openssl rand -base64 32
WEBHOOK_VALIDATION_TOKEN=

# Webhook subscription renewal interval (hours)
WEBHOOK_RENEWAL_INTERVAL=24

# ============================================================================
# AZURE AD GROUP SYNC CONFIGURATION
# ============================================================================

# Group sync interval (minutes)
GROUP_SYNC_INTERVAL=15

# Group sync delta query support (true/false)
GROUP_SYNC_USE_DELTA=true

# Cache TTL for group membership (minutes)
GROUP_CACHE_TTL=15

# ============================================================================
# PERFORMANCE TUNING
# ============================================================================

# Maximum concurrent AI processing jobs
MAX_CONCURRENT_AI_JOBS=5

# AI processing timeout (seconds)
AI_PROCESSING_TIMEOUT=300

# Webhook processing queue size
WEBHOOK_QUEUE_SIZE=100

# SharePoint upload retry attempts
SHAREPOINT_RETRY_ATTEMPTS=3

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================

# Enable CORS (true/false)
ENABLE_CORS=true

# Allowed CORS origins (comma-separated)
CORS_ORIGINS=https://teams.microsoft.com,https://outlook.office.com

# Enable rate limiting (true/false)
ENABLE_RATE_LIMITING=true

# Rate limit requests per minute
RATE_LIMIT_RPM=100

# JWT token expiration (hours)
JWT_EXPIRATION_HOURS=24

# ============================================================================
# DEVELOPMENT/TESTING ONLY
# ============================================================================

# Use mock services for development (true/false)
USE_MOCK_SERVICES=true

# Mock meeting generation interval (seconds, 0=disabled)
MOCK_MEETING_INTERVAL=0

# Enable debug mode (verbose logging, no external calls)
DEBUG_MODE=false

# Bypass authentication (DEVELOPMENT ONLY - NEVER IN PRODUCTION)
BYPASS_AUTH=false

# ============================================================================
# NOTES
# ============================================================================
#
# Required Secrets (Minimum for Development):
# - GRAPH_TENANT_ID_DEV
# - GRAPH_CLIENT_ID_DEV
# - GRAPH_CLIENT_SECRET_DEV
# - AZURE_OPENAI_ENDPOINT_DEV
# - AZURE_OPENAI_API_KEY_DEV
# - AZURE_OPENAI_DEPLOYMENT_DEV
# - SESSION_SECRET
#
# Required Secrets (Production):
# - All *_PROD variants of above
# - SHAREPOINT_SITE_URL
# - SHAREPOINT_LIBRARY
# - BASE_URL
# - WEBHOOK_VALIDATION_TOKEN
#
# Auto-Configured in Replit:
# - DATABASE_URL (and PG* variables)
# - PORT
#
# Obtain Credentials:
# - Azure AD: See AZURE_SETUP.md
# - SharePoint: Use Replit SharePoint connector or manual app registration
# - Azure OpenAI: See AZURE_SETUP.md
#
